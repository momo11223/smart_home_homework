-- 用户表
CREATE TABLE users(
    user_id      SERIAL PRIMARY KEY,
    username     VARCHAR(30) UNIQUE NOT NULL
               CHECK (LENGTH(username) >= 4 AND LENGTH(username) <= 10
                     AND username ~ '^[a-zA-Z][a-zA-Z0-9_]*$'),
    password     VARCHAR(255) NOT NULL
               CHECK (LENGTH(password) >= 6 AND LENGTH(password) <= 16
                     AND password ~ '^[a-zA-Z][a-zA-Z0-9_]*$'),
    gender       VARCHAR(10) CHECK (gender IN ('Male', 'Female', 'Other')),
    birth_date   DATE CHECK (birth_date > '1900-01-01' AND birth_date <= CURRENT_DATE),
    phone_number VARCHAR(20) UNIQUE NOT NULL CHECK (phone_number ~ '^[0-9]{11}$'),
    house_area   FLOAT CHECK (house_area > 0 AND house_area < 1000),
    email        VARCHAR(100) UNIQUE NOT NULL CHECK (
                     email ~* '^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$')
);



-- 设备信息表
CREATE TABLE devices (
    device_id SERIAL PRIMARY KEY,
    name VARCHAR(30) NOT NULL CHECK (LENGTH(name) >= 2 AND LENGTH(name) <= 100),
    type VARCHAR(10) NOT NULL CHECK (type IN ('空调', '照明', '安防', '插座', '娱乐', '热水器', '传感器', '家电', '窗帘', '其他')),
    location VARCHAR(50) NOT NULL CHECK (location IN ('客厅', '主卧', '次卧', '书房', '阳台', '厨房', '浴室', '大门', '其他')),
    installation_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);



-- 设备使用记录表
CREATE TABLE device_usage_records (
    record_id SERIAL PRIMARY KEY,
    device_id INTEGER NOT NULL REFERENCES devices(device_id) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    start_time TIMESTAMP NOT NULL,
    end_time TIMESTAMP,
    temperature FLOAT,
    energy_consumption FLOAT NOT NULL CHECK (energy_consumption >= 0),
    -- 确保结束时间要么为空，要么晚于开始时间
    CONSTRAINT valid_time_range CHECK (
        (end_time IS NULL) OR
        (end_time > start_time)
    )
);
-- 创建触发器函数
CREATE OR REPLACE FUNCTION set_default_end_time()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.end_time IS NULL THEN
        -- 设置为当天23:59:59.999
        NEW.end_time := DATE_TRUNC('day', NEW.start_time) + INTERVAL '1 day' - INTERVAL '1 millisecond';
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;
-- 创建触发器
CREATE TRIGGER trg_set_default_end_time
BEFORE INSERT OR UPDATE ON device_usage_records
FOR EACH ROW
EXECUTE FUNCTION set_default_end_time();



-- 安防事件表
CREATE TABLE security_events (
    event_id SERIAL PRIMARY KEY,
    device_id INTEGER NOT NULL REFERENCES devices(device_id) ON DELETE CASCADE,
    event_type VARCHAR(20) NOT NULL CHECK (event_type IN (
        '门锁异常', '移动检测', '烟雾警报', '入侵警报','门铃按动',
        '水浸检测', '玻璃破碎', '紧急按钮', '温度异常','密码错误',
        '指纹错误','一氧化碳警报', '设备离线', '电池电量低', '非法闯入','其它'
    )), -- 事件类型
    occurrence_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, -- 事件发生日期和时间
    severity VARCHAR(20) NOT NULL CHECK (severity IN ('Low', 'Medium', 'High')), -- 严重程度
    is_resolved BOOLEAN NOT NULL DEFAULT FALSE, -- 是否解决
    description TEXT -- 事件详细描述
   );



-- 用户反馈表
CREATE TABLE user_feedbacks (
    feedback_id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    device_id INTEGER NOT NULL REFERENCES devices(device_id) ON DELETE CASCADE,
    satisfaction_rating SMALLINT NOT NULL CHECK (satisfaction_rating BETWEEN 1 AND 10), -- 满意度评分 1 - 10
    feedback_text TEXT, -- 反馈文本
    feedback_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP-- 反馈日期，默认当前时间
);




-- 插入users表数据 (20个用户)
INSERT INTO users (user_id, username, password, gender, birth_date, phone_number, house_area, email) VALUES
(1, 'user1', 'a1b2c3d4e5', 'Male', '1985-03-15', '13800138001', 85.5, 'user1@example.com'),
(2, 'user2', 'b2c3d4e5f6', 'Female', '1990-07-22', '13800138002', 120.0, 'user2@example.com'),
(3, 'user3', 'c3d4e5f6g7', 'Male', '1988-11-05', '13800138003', 65.0, 'user3@example.com'),
(4, 'user4', 'd4e5f6g7h8', 'Female', '1992-04-18', '13800138004', 95.5, 'user4@example.com'),
(5, 'user5', 'e5f6g7h8i9', 'Male', '1983-09-30', '13800138005', 150.0, 'user5@example.com'),
(6, 'user6', 'f6g7h8i9j0', 'Female', '1995-01-12', '13800138006', 75.0, 'user6@example.com'),
(7, 'user7', 'g7h8i9j0k1', 'Male', '1980-12-25', '13800138007', 110.0, 'user7@example.com'),
(8, 'user8', 'h8i9j0k1l2', 'Female', '1993-06-08', '13800138008', 88.0, 'user8@example.com'),
(9, 'user9', 'i9j0k1l2m3', 'Male', '1987-02-14', '13800138009', 130.0, 'user9@example.com'),
(10, 'user10', 'j0k1l2m3n4', 'Female', '1991-08-03', '13800138010', 70.0, 'user10@example.com'),
(11, 'user11', 'k1l2m3n4o5', 'Male', '1984-05-20', '13800138011', 105.0, 'user11@example.com'),
(12, 'user12', 'l2m3n4o5p6', 'Female', '1994-10-15', '13800138012', 92.0, 'user12@example.com'),
(13, 'user13', 'm3n4o5p6q7', 'Male', '1986-07-07', '13800138013', 115.0, 'user13@example.com'),
(14, 'user14', 'n4o5p6q7r8', 'Female', '1989-12-31', '13800138014', 80.0, 'user14@example.com'),
(15, 'user15', 'o5p6q7r8s9', 'Male', '1982-04-22', '13800138015', 140.0, 'user15@example.com'),
(16, 'user16', 'p6q7r8s9t0', 'Female', '1996-09-17', '13800138016', 68.0, 'user16@example.com'),
(17, 'user17', 'q7r8s9t0u1', 'Male', '1981-11-11', '13800138017', 125.0, 'user17@example.com'),
(18, 'user18', 'r8s9t0u1v2', 'Female', '1997-03-28', '13800138018', 78.0, 'user18@example.com'),
(19, 'user19', 's9t0u1v2w3', 'Male', '1989-08-09', '13800138019', 135.0, 'user19@example.com'),
(20, 'user20', 't0u1v2w3x4', 'Female', '1998-01-05', '13800138020', 85.0, 'user20@example.com');

-- 插入devices表数据 (30个设备)
INSERT INTO devices (device_id, name, type, location, installation_time) VALUES
(1, '客厅空调', '空调', '客厅', '2022-01-10 09:15:23'),
(2, '卧室空调', '空调', '主卧', '2022-01-12 14:30:45'),
(3, '智能灯泡', '照明', '客厅', '2022-02-05 10:22:18'),
(4, '智能门锁', '安防', '大门', '2022-02-15 16:45:37'),
(5, '厨房摄像头', '安防', '厨房', '2022-03-01 11:10:52'),
(6, '卧室智能插座', '插座', '次卧', '2022-03-10 08:33:29'),
(7, '客厅电视', '娱乐', '客厅', '2022-04-05 13:25:14'),
(8, '浴室热水器', '热水器', '浴室', '2022-04-15 17:40:08'),
(9, '书房智能灯', '照明', '书房', '2022-05-02 09:55:42'),
(10, '阳台传感器', '传感器', '阳台', '2022-05-12 15:20:31'),
(11, '客厅音响', '娱乐', '客厅', '2022-06-01 10:18:27'),
(12, '卧室加湿器', '家电', '主卧', '2022-06-10 14:37:59'),
(13, '厨房烟雾报警器', '安防', '厨房', '2022-07-05 11:05:43'),
(14, '客厅窗帘', '窗帘', '客厅', '2022-07-15 16:30:22'),
(15, '卧室空气净化器', '家电', '次卧', '2022-08-01 08:42:17'),
(16, '智能门铃', '安防', '大门', '2022-08-10 12:55:36'),
(17, '厨房智能插座', '插座', '厨房', '2022-09-05 09:28:14'),
(18, '浴室智能镜', '家电', '浴室', '2022-09-15 17:10:48'),
(19, '书房空调', '空调', '书房', '2022-10-01 10:40:33'),
(20, '阳台智能灯', '照明', '阳台', '2022-10-10 15:15:27'),
(21, '客厅扫地机器人', '家电', '客厅', '2022-11-05 11:22:19'),
(22, '卧室智能窗帘', '窗帘', '主卧', '2022-11-15 16:50:42'),
(23, '厨房智能冰箱', '家电', '厨房', '2022-12-01 08:35:28'),
(24, '浴室智能马桶', '家电', '浴室', '2022-12-10 14:20:15'),
(25, '书房智能插座', '插座', '书房', '2023-01-05 10:12:37'),
(26, '阳台摄像头', '安防', '阳台', '2023-01-15 17:05:49'),
(27, '客厅空气检测仪', '传感器', '客厅', '2023-02-01 09:45:23'),
(28, '卧室智能床', '家电', '主卧', '2023-02-10 13:30:58'),
(29, '厨房智能烤箱', '家电', '厨房', '2023-03-05 11:15:42'),
(30, '浴室智能秤', '家电', '浴室', '2023-03-15 16:40:31');

-- 插入device_usage_records表数据 (100条使用记录)
INSERT INTO device_usage_records (device_id, user_id, start_time, end_time, temperature, energy_consumption) VALUES
-- 用户1的设备使用记录
(1, 1, '2023-04-01 01:15:23', '2023-04-01 10:30:45', 24.5, 2.5),
(2, 1, '2023-04-01 20:45:12', '2023-04-01 23:15:30', 22.0, 2.3),
(1, 1, '2023-04-02 09:30:15', '2023-04-02 11:45:22', 25.0, 2.2),
(22, 1, '2023-04-02 07:20:33', '2023-04-02 07:45:18', NULL, 0.3),
(2, 1, '2023-04-03 21:10:47', '2023-04-03 23:55:12', 21.5, 2.7),
(1, 1, '2023-04-04 10:05:29', '2023-04-04 12:30:41', 23.5, 2.3),
(22, 1, '2023-04-05 07:15:52', '2023-04-05 07:40:38', NULL, 0.4),
(2, 1, '2023-04-05 20:30:19', '2023-04-05 22:45:27', 22.5, 2.1),

-- 用户2的设备使用记录
(3, 2, '2023-04-01 18:30:45', '2023-04-01 23:15:22', NULL, 1.8),
(23, 2, '2023-04-02 08:45:33', '2023-04-02 09:30:17', NULL, 0.7),
(3, 2, '2023-04-02 19:15:28', '2023-04-02 22:45:39', NULL, 1.5),
(23, 2, '2023-04-03 09:20:14', '2023-04-03 10:05:42', NULL, 0.8),
(3, 2, '2023-04-03 18:45:53', '2023-04-03 23:30:21', NULL, 1.9),
(23, 2, '2023-04-04 08:30:27', '2023-04-04 09:15:39', NULL, 0.8),
(3, 2, '2023-04-04 19:30:15', '2023-04-04 22:15:48', NULL, 1.4),
(23, 2, '2023-04-05 09:15:42', '2023-04-05 10:00:33', NULL, 0.8),

-- 用户3的设备使用记录
(4, 3, '2023-04-01 07:30:15', '2023-04-01 08:15:22', NULL, 0.7),
(24, 3, '2023-04-01 20:45:33', '2023-04-01 21:30:19', NULL, 0.8),
(4, 3, '2023-04-02 07:45:28', '2023-04-02 08:30:41', NULL, 0.8),
(24, 3, '2023-04-02 21:15:52', '2023-04-02 22:00:37', NULL, 0.7),
(4, 3, '2023-04-03 08:00:19', '2023-04-03 08:45:33', NULL, 0.8),
(24, 3, '2023-04-03 20:30:45', '2023-04-03 21:15:28', NULL, 0.7),
(4, 3, '2023-04-04 07:15:37', '2023-04-04 08:00:52', NULL, 0.8),
(24, 3, '2023-04-04 21:45:19', '2023-04-04 22:30:33', NULL, 0.7),

-- 用户4的设备使用记录
(5, 4, '2023-04-01 09:30:45', '2023-04-01 10:15:22', NULL, 0.8),
(5, 4, '2023-04-02 10:45:33', '2023-04-02 11:30:17', NULL, 0.7),
(5, 4, '2023-04-03 11:15:28', '2023-04-03 12:00:39', NULL, 0.8),
(5, 4, '2023-04-04 09:30:14', '2023-04-04 10:15:42', NULL, 0.7),
(5, 4, '2023-04-05 10:45:53', '2023-04-05 11:30:21', NULL, 0.8),

-- 用户5的设备使用记录
(6, 5, '2023-04-01 19:30:27', '2023-04-01 22:15:39', NULL, 1.4),
(26, 5, '2023-04-02 08:45:15', '2023-04-02 09:30:48', NULL, 0.8),
(6, 5, '2023-04-02 20:15:42', '2023-04-02 23:00:33', NULL, 1.4),
(26, 5, '2023-04-03 09:30:19', '2023-04-03 10:15:45', NULL, 0.7),
(6, 5, '2023-04-03 21:45:33', NULL, NULL, 1.3),
(26, 5, '2023-04-04 08:15:28', '2023-04-04 09:00:41', NULL, 0.8),
(6, 5, '2023-04-04 20:30:45', '2023-04-04 23:15:19', NULL, 1.4),
(26, 5, '2023-04-05 09:45:17', '2023-04-05 10:30:33', NULL, 0.8),

-- 其他用户设备使用记录...
(7, 6, '2023-04-01 18:15:22', '2023-04-01 21:30:45', NULL, 1.6),
(7, 6, '2023-04-02 19:30:33', '2023-04-02 22:45:17', NULL, 1.5),
(8, 7, '2023-04-01 07:45:28', '2023-04-01 08:30:39', 40.0, 0.8),
(8, 7, '2023-04-02 07:30:14', '2023-04-02 08:15:42', 38.5, 0.8),
(9, 8, '2023-04-01 20:15:53', '2023-04-01 23:30:21', NULL, 1.6),
(9, 8, '2023-04-02 21:30:19', NULL, NULL, 1.5),
(10, 9, '2023-04-01 08:45:33', '2023-04-01 09:30:52', NULL, 0.8),
(10, 9, '2023-04-02 09:30:45', '2023-04-02 10:15:19', NULL, 0.7),
(11, 10, '2023-04-01 17:15:28', '2023-04-01 20:30:41', NULL, 1.6),
(11, 10, '2023-04-02 18:30:17', '2023-04-02 21:45:33', NULL, 1.5),
(12, 11, '2023-04-01 21:45:42', '2023-04-02 07:15:27', 50.0, 4.7),
(12, 11, '2023-04-02 22:30:19', NULL, 48.0, 4.8),
(13, 12, '2023-04-01 10:15:33', '2023-04-01 10:30:52', NULL, 0.3),
(13, 12, '2023-04-02 11:30:45', '2023-04-02 11:45:19', NULL, 0.2),
(14, 13, '2023-04-01 07:30:28', '2023-04-01 07:45:41', NULL, 0.3),
(14, 13, '2023-04-02 08:45:17', '2023-04-02 09:00:33', NULL, 0.3),
(15, 14, '2023-04-01 19:15:42', NULL, NULL, 4.9),
(15, 14, '2023-04-02 20:30:19', NULL, NULL, 5.0),
(16, 15, '2023-04-01 08:45:33', '2023-04-01 09:00:52', NULL, 0.3),
(16, 15, '2023-04-02 09:30:45', '2023-04-02 09:45:19', NULL, 0.2),
(17, 16, '2023-04-01 18:15:28', '2023-04-01 22:30:41', NULL, 1.7),
(17, 16, '2023-04-02 19:30:17', '2023-04-02 23:45:33', NULL, 1.6),
(18, 17, '2023-04-01 07:45:42', '2023-04-01 08:15:27', NULL, 0.5),
(18, 17, '2023-04-02 08:30:19', '2023-04-02 09:00:45', NULL, 0.5),
(19, 18, '2023-04-01 20:15:33', '2023-04-01 22:30:52', 23.0, 1.1),
(19, 18, '2023-04-02 21:30:45', '2023-04-02 23:45:19', 22.5, 1.1),
(20, 19, '2023-04-01 18:45:28', '2023-04-01 23:00:41', NULL, 1.7),
(20, 19, '2023-04-02 19:30:17', '2023-04-02 23:45:33', NULL, 1.6),
(21, 20, '2023-04-01 10:15:42', '2023-04-01 11:00:27', NULL, 0.8),
(21, 20, '2023-04-02 11:30:19', '2023-04-02 12:15:45', NULL, 0.8),
(3, 2, '2023-04-05 18:30:15', '2023-04-05 22:45:28', NULL, 1.7),
(7, 6, '2023-04-03 18:15:22', '2023-04-03 21:30:45', NULL, 1.6),
(8, 7, '2023-04-03 07:45:28', '2023-04-03 08:30:39', 39.0, 0.8),
(9, 8, '2023-04-03 20:15:53', '2023-04-03 23:30:21', NULL, 1.6),
(10, 9, '2023-04-03 08:45:33', '2023-04-03 09:30:52', NULL, 0.8),
(11, 10, '2023-04-03 17:15:28', '2023-04-03 20:30:41', NULL, 1.6),
(12, 11, '2023-04-03 21:45:42', NULL, 49.0, 4.7),
(13, 12, '2023-04-03 10:15:33', '2023-04-03 10:30:52', NULL, 0.3),
(14, 13, '2023-04-03 07:30:28', '2023-04-03 07:45:41', NULL, 0.3),
(15, 14, '2023-04-03 19:15:42', NULL, NULL, 4.9),
(16, 15, '2023-04-03 08:45:33', '2023-04-03 09:00:52', NULL, 0.3),
(17, 16, '2023-04-03 18:15:28', '2023-04-03 22:30:41', NULL, 1.7),
(18, 17, '2023-04-03 07:45:42', '2023-04-03 08:15:27', NULL, 0.5),
(19, 18, '2023-04-03 20:15:33', '2023-04-03 22:30:52', 23.5, 1.1),
(20, 19, '2023-04-03 18:45:28', '2023-04-03 23:00:41', NULL, 1.7),
(21, 20, '2023-04-03 10:15:42', '2023-04-03 11:00:27', NULL, 0.8),
(1, 1, '2023-04-05 09:15:23', '2023-04-05 11:30:45', 24.0, 2.3),
(22, 1, '2023-04-06 07:20:33', '2023-04-06 07:45:18', NULL, 0.4),
(3, 2, '2023-04-06 18:30:15', '2023-04-06 22:45:28', NULL, 1.7),
(23, 2, '2023-04-06 09:15:42', '2023-04-06 10:00:33', NULL, 0.8),
(4, 3, '2023-04-06 07:45:28', '2023-04-06 08:30:41', NULL, 0.8),
(24, 3, '2023-04-06 21:15:52', '2023-04-06 22:00:37', NULL, 0.7),
(5, 4, '2023-04-06 09:30:14', '2023-04-06 10:15:42', NULL, 0.7),
(6, 5, '2023-04-06 20:15:42', '2023-04-06 23:00:33', NULL, 1.4),
(26, 5, '2023-04-06 09:30:19', '2023-04-06 10:15:45', NULL, 0.7),
(7, 6, '2023-04-06 18:15:22', '2023-04-06 21:30:45', NULL, 1.6),
(8, 7, '2023-04-06 07:45:28', '2023-04-06 08:30:39', 38.0, 0.8),
(9, 8, '2023-04-06 20:15:53', '2023-04-06 23:30:21', NULL, 1.6),
(10, 9, '2023-04-06 08:45:33', '2023-04-06 09:30:52', NULL, 0.8),
(11, 10, '2023-04-06 17:15:28', '2023-04-06 20:30:41', NULL, 1.6),
(12, 11, '2023-04-06 21:45:42',NULL, 48.0, 4.7),
(13, 12, '2023-04-06 10:15:33', '2023-04-06 10:30:52', NULL, 0.3),
(14, 13, '2023-04-06 07:30:28', '2023-04-06 07:45:41', NULL, 0.3),
(15, 14, '2023-04-06 19:15:42', NULL, NULL, 4.9),
(16, 15, '2023-04-06 08:45:33', '2023-04-06 09:00:52', NULL, 0.3),
(17, 16, '2023-04-06 18:15:28', '2023-04-06 22:30:41', NULL, 1.7),
(18, 17, '2023-04-06 07:45:42', '2023-04-06 08:15:27', NULL, 0.5),
(19, 18, '2023-04-06 20:15:33', '2023-04-06 22:30:52', 22.0, 1.1),
(20, 19, '2023-04-06 18:45:28', '2023-04-06 23:00:41', NULL, 1.7),
(21, 20, '2023-04-06 10:15:42', '2023-04-06 11:00:27', NULL, 0.8);

-- 更新能耗值为原能耗 × 使用小时数
UPDATE device_usage_records
SET energy_consumption = energy_consumption *
    ROUND(EXTRACT(EPOCH FROM (end_time - start_time)) / 3600)
WHERE end_time IS NOT NULL;


-- 插入security_events表数据 (20条安防事件)
INSERT INTO security_events (device_id, event_type, occurrence_date, severity, is_resolved) VALUES
('4', '门锁异常', '2023-04-01 02:15:33', 'Medium', TRUE),
('5', '移动检测', '2023-04-01 03:30:45', 'Low', TRUE),
('13', '烟雾警报', '2023-04-02 08:45:22', 'High', TRUE),
('16', '门铃按动', '2023-04-02 12:30:17', 'Low', TRUE),
('26', '移动检测', '2023-04-03 15:45:39', 'Medium', TRUE),
('4', '非法闯入', '2023-04-03 23:15:28', 'High', TRUE),
('5', '移动检测', '2023-04-04 04:30:42', 'Low', FALSE),
('13', '温度异常', '2023-04-04 09:15:19', 'Medium', TRUE),
('16', '门铃按动', '2023-04-05 11:45:33', 'Low', TRUE),
('26', '移动检测', '2023-04-05 16:30:27', 'Medium', FALSE),
('4', '密码错误', '2023-04-06 01:15:48', 'Low', TRUE),
('5', '移动检测', '2023-04-06 05:30:15', 'Low', TRUE),
('13', '烟雾警报', '2023-04-06 10:45:22', 'High', FALSE),
('16', '门铃按动', '2023-04-06 13:30:39', 'Low', TRUE),
('26', '移动检测', '2023-04-06 17:45:17', 'Medium', TRUE),
('4', '指纹错误', '2023-04-06 22:15:28', 'Low', TRUE),
('5', '移动检测', '2023-04-07 00:30:42', 'Low', FALSE),
('13', '一氧化碳警报', '2023-04-07 07:45:19', 'High', TRUE),
('16', '门铃按动', '2023-04-07 14:30:33', 'Low', TRUE),
('26', '移动检测', '2023-04-07 18:45:27', 'Medium', FALSE);

-- 插入user_feedbacks表数据 (30条用户反馈)
INSERT INTO user_feedbacks (user_id, device_id, satisfaction_rating, feedback_text, feedback_date) VALUES
-- 用户1对设备1的反馈（随时间变化）
('1', '1', 8, '客厅空调制冷效果不错，但噪音有点大', '2023-03-01 10:15:22'),
('1', '1', 7, '空调使用一段时间后，噪音问题更明显了', '2023-04-01 14:30:45'),
('1', '2', 9, '卧室空调非常安静，睡眠模式很好用', '2023-03-15 09:20:33'),
('1', '2', 8, '卧室空调仍然不错，但遥控器偶尔不灵敏', '2023-04-15 21:45:17'),

-- 用户2对设备3的反馈（随时间变化）
('2', '3', 9, '智能灯泡颜色变化很丰富，app控制方便', '2023-03-05 11:30:28'),
('2', '3', 8, '灯泡使用一个月后，有时会连接不稳定', '2023-04-05 19:15:42'),
('2', '23', 7, '智能冰箱功能多但有些复杂，老人不会用', '2023-03-20 08:45:19'),
('2', '23', 6, '冰箱的智能屏幕有时会卡顿，希望改进', '2023-04-20 17:30:55'),

-- 用户3对设备4的反馈（随时间变化）
('3', '4', 8, '智能门锁很方便，不用带钥匙了', '2023-03-10 13:20:37'),
('3', '4', 7, '门锁电池消耗有点快，一个月就要换', '2023-04-10 18:45:23'),
('3', '24', 9, '智能马桶加热功能冬天很实用', '2023-03-25 09:15:48'),
('3', '24', 8, '马桶的自动感应有时太敏感了', '2023-04-25 20:30:12'),

-- 其他用户反馈
('4', '5', 6, '厨房摄像头画质一般，夜视效果不好', '2023-04-02 10:45:33'),
('5', '6', 8, '智能插座远程控制很实用，电量统计准确', '2023-04-03 15:20:19'),
('6', '7', 9, '客厅电视画质很棒，语音控制灵敏', '2023-04-04 19:30:47'),
('7', '8', 7, '热水器加热速度可以，但app偶尔连不上', '2023-04-05 08:15:28'),
('8', '9', 9, '书房智能灯亮度调节很舒服，护眼模式好', '2023-04-06 12:45:36'),
('9', '10', 8, '阳台传感器检测准确，防水性能好', '2023-04-07 16:30:24'),
('10', '11', 7, '客厅音响音质不错，但低音表现一般', '2023-04-08 20:15:42'),
('11', '12', 8, '卧室加湿器雾量很大，静音效果不错', '2023-04-09 09:30:18'),
('12', '13', 6, '烟雾报警器太敏感，做饭经常误报', '2023-04-10 14:45:53'),
('13', '14', 9, '智能窗帘开关顺滑，定时功能很实用', '2023-04-11 18:20:37'),
('14', '15', 8, '空气净化器效果明显，滤芯更换提醒准', '2023-04-12 07:45:29'),
('15', '16', 7, '智能门铃画质清晰，但续航时间短', '2023-04-13 11:30:46'),
('16', '17', 8, '厨房智能插座防水设计好，使用安全', '2023-04-14 15:15:33'),
('17', '18', 9, '智能镜灯光柔和，除雾功能很实用', '2023-04-15 19:45:27'),
('18', '19', 7, '书房空调制冷快，但出风口设计不合理', '2023-04-16 08:30:19'),
('19', '20', 8, '阳台智能灯亮度足够，防水性能好', '2023-04-17 12:15:44'),
('20', '21', 9, '扫地机器人清扫干净，路线规划合理', '2023-04-18 16:45:38');

-- 新增用户反馈数据
INSERT INTO user_feedbacks (user_id, device_id, satisfaction_rating, feedback_text, feedback_date) VALUES
-- 设备1（客厅空调）的补充反馈
('1', '1', 6, '近期空调制冷效率下降，需要维修检查', '2023-05-05 14:20:11'),
('1', '1', 7, '维修后制冷恢复，但风速调节有异响', '2023-06-10 16:45:09'),
('1', '1', 8, '更换滤网后整体使用体验改善', '2023-07-18 09:30:47'),

-- 设备2（卧室空调）的补充反馈
('1', '2', 9, '睡眠模式静音效果超出预期', '2023-05-20 22:15:33'),
('1', '2', 8, '定时关闭功能偶尔失效', '2023-06-25 23:05:17'),
('1', '2', 9, '固件更新后功能稳定性提升', '2023-08-02 20:40:55'),

-- 设备3（智能灯泡）的补充反馈
('2', '3', 7, '灯泡色温调节不够自然', '2023-05-08 19:30:22'),
('2', '3', 8, '联动场景设置教程不够直观', '2023-07-12 11:15:41'),
('2', '3', 9, '新增流光模式非常有创意', '2023-09-01 21:25:38'),

-- 设备4（智能门锁）的补充反馈
('3', '4', 7, '指纹识别率阴雨天下降明显', '2023-05-15 08:45:16'),
('3', '4', 8, '临时密码功能非常实用', '2023-08-22 18:30:49'),
('3', '4', 9, '防撬报警触发灵敏值得肯定', '2023-10-05 07:15:27'),

-- 设备5（厨房摄像头）的补充反馈
('4', '5', 6, '移动追踪功能经常丢失目标', '2023-06-07 12:10:34'),
('4', '5', 7, '夜视模式出现彩色噪点', '2023-09-14 20:55:12'),
('4', '5', 8, '云存储回放速度优化明显', '2023-11-03 09:40:18'),
-- 设备23（智能冰箱）的补充反馈
('2', '23', 7, '食材管理功能识别错误', '2023-05-22 07:50:14'),
('2', '23', 8, '增加蔬果保鲜专区建议', '2023-07-08 12:35:27'),
('2', '23', 7, '制冰机工作时间噪音偏大', '2023-09-15 18:20:39'),

-- 设备24（智能马桶）的补充反馈
('3', '24', 9, '座圈加热温度调节精准', '2023-06-05 06:15:43'),
('3', '24', 8, '自动冲水感应距离可优化', '2023-08-18 13:40:55'),
('3', '24', 9, '节水模式效果显著', '2023-10-12 21:05:17'),

-- 设备25（书房智能插座）的补充反馈
('8', '25', 8, '功率监测数据准确', '2023-05-28 14:30:28'),
('8', '25', 7, '插孔间距设计过小', '2023-07-02 17:45:12'),
('8', '25', 9, '儿童锁功能非常实用', '2023-09-09 08:20:36');

